# Tables of the RED FLAGS webapp



These tables are used by the *Red Flags* webapp. Most of them are "helper tables" generated by a script.



## persistent_logins

This table is used by *Spring Security* for the remember-me function.

Field       | Type          | Description
------------|---------------|------------
`username`  | `varchar(64)` |
`series`    | `varchar(64)` | **[PK]**
`token`     | `varchar(64)` |
`last_used` | `timestamp`   |



## rfwl_barplot

This generated table contains data for the bar plot on the welcome page.

Field | Type            | Description
------|-----------------|------------
`c`   | `varchar(200)`  | Contract type ID
`v`   | `decimal(65,4)` | Total value of contracts
`y`   | `int(4)`        | Year



## rfwl_cpvs

This generated table contains the CPV codes to all notices, in one record for each notice. This helps out the CPV filter.

Field      | Type           | Description
-----------|----------------|------------
`cpvs`     | `text`         | CPV codes separated by `|`
`noticeId` | `varchar(200)` |



## rfwl_notices

This generated table contains the most important data for every notice, to be displayed on the list page.

Field                | Type            | Description
---------------------|-----------------|------------
`contractingOrgId`   | `varchar(200)`  | ID of the contracting authority organization
`contractingOrgName` | `longtext`      | Name of the contracting authority
`date`               | `datetime`      | Publication date of the notice
`documentFamilyId`   | `varchar(200)`  | Document family ID
`estimated`          | `decimal(44,0)` | Total estimated value
`estimatedCurr`      | `text`          | Currency of total estimated value
`flagCount`          | `bigint(21)`    | Count of flags
`id`                 | `varchar(200)`  | Notice ID
`title`              | `text`          | Contract title
`total`              | `decimal(44,0)` | Total final value
`totalCurr`          | `text`          | Currency of total final value
`typeId`             | `varchar(200)`  | Document type ID
`type`               | `varchar(200)`  | Document type in crawl language
`url`                | `varchar(200)`  | *TED* url



## rfwl_organizations

This generated table contains data about organizations, for the list page.

Field   | Type           | Description
--------|----------------|------------
`calls` | `bigint(21)`   | Count of tenders the organization appeared in as the contracting authority
`id`    | `varchar(200)` |
`name`  | `longtext`     |
`type`  | `varchar(200)` |
`wins`  | `bigint(21)`   | Count of tenders the organization appeared in as an award winner



## rfwl_userfilters

This table stores the filters saved by users.

Field              | Type           | Description
-------------------|----------------|------------
`id`               | `bigint(20)`   | **[PK]** [AI]
`filter`           | `varchar(255)` | String representation of the filter.
`last_sent_number` | `int(11)`      | Number part of the last sent notice's ID.
`last_sent_year`   | `int(11)`      | Year part of the last sent notice's ID.
`name`             | `varchar(255)` | Filter name specified by the user.
`subscribe`        | `bit(1)`       | Whether the user is subscribed to this filter.
`user_id`          | `bigint(20)`   |



## rfwl_users

This table contains the user accounts.

Field                       | Type           | Description
----------------------------|----------------|------------
`active`                    | `bit(1)`       | Whether the account is active or not
`crypted_password`          | `varchar(255)` |
`email_address`             | `varchar(255)` |
`id`                        | `bigint(20)`   | **[PK]** [AI]
`lang`                      | `varchar(255)` | Preferred language, currently saved when registering
`name`                      | `varchar(255)` |
`registered_at`             | `datetime`     |
`remember_token`            | `varchar(255)` |
`remember_token_expires_at` | `datetime `    |



## rfwl_winners

This generated table contains notice-winner pairs for the list pages.

Field           | Type           | Description
----------------|----------------|------------
`noticeId`      | `text`         |
`winnerOrgId`   | `varchar(200)` |
`winnerOrgName` | `longtext`     |